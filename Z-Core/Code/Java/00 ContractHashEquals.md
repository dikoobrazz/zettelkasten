2022120609:59
___
Date: 06-12-2022 | 09:59
Tags: #code #java 
mapofcontents:
___
## Contract Hashcode and Equals (HashMap, HashSet)
Методы Java equals() и hashCode() присутствуют в классе Object. Таким образом, каждый класс Java получает реализацию по умолчанию equals() и hashCode().

### Java equals()
```java
public boolean equals(Object obj) {
    return (this == obj);
}
```
Согласно java-документации метода equals(), любая реализация должна придерживаться следующих принципов: 
- Для любого объекта x функция `x.equals(x)` должна возвращать `true`. 
- Для любых двух объектов x и y функция `x.equals(y)` должна возвращать значение `true` тогда и только тогда, когда `y.equals(x)` возвращает значение `true`. 
- Для нескольких объектов x, y и z, если `x.equals(y)` возвращает `true`, а `y.equals(z)` возвращает `true`, то `x.equals(z)` должен возвращать `true`. 
- Несколько вызовов `x.equals(y)` должны возвращать один и тот же результат, если только не изменено какое-либо свойство объекта, используемое в реализации метода `equals()`.
- Реализация метода equals() класса объекта возвращает `true`, только если обе ссылки указывают на один и тот же объект.

### Java hashCode()
Функция Java Object hashCode() является собственным методом и возвращает целочисленное значение хеш-кода объекта. 
Общий контракт метода hashCode(): 
- Несколько вызовов hashCode() должны возвращать одно и то же целочисленное значение, если только свойство объекта не изменено, которое используется в методе equals(). 
- Значение хеш-кода объекта может измениться при многократном выполнении одного и того же приложения. 
- Если два объекта равны по методу equals(), то их хэш-код должен быть одинаковым. 
- Если два объекта не равны по методу equals(), их хеш-коды не обязательно должны быть разными. Их значение хэш-кода может быть равным, а может и не быть.

### Важность методов equals() и hashCode()
Методы Java hashCode() и equals() используются в реализациях на основе хеш-таблиц в Java для хранения и извлечения данных. Реализация equals() и hashCode() должна следовать этим правилам:
- Если `o1.equals(o2)`, то `o1.hashCode() == o2.hashCode()` всегда должно быть `true`. 
- Если `o1.hashCode() == o2.hashCode` `true`, это не означает, что `o1.equals(o2)` будет `true`

#### HASHMAP

![[_resources/HashMap 1.png]]


#### HASHSET
![[_resources/HashSet 1.png]]


### Что такое Hash Collision
В реализации хэш-таблицы, Java использует следующую логику для операций `get` и `put`:
1. Сначала определяется "Bucket" (корзина) для использования с помощью хэш-кода по "key"
2. Если в корзине нет объектов с таким же хэш-кодом, добавит объект в корзину для метода `put` и вернет значение `null` для метода `get`.
3. Если в корзине есть другие объекты с таким же хеш-кодом, то в игру вступает метод `equals`
	- Если `equals()` возвращает `true` и это метод `put`, то `value` существующего объекта переопределяется.
	- Если `equals()` возвращает `false` и это метод `put`, то в корзину добавляется новая запись.
	- Если `equals()` возвращает `true` и это метод `get`, то возвращается значение объекта.
	- Если `equals()` возвращает `false` и это метод `get`, то возвращается `null`.



-----
**Zero-Links**  (Внутренние ссылки) Линки - ключевые слова
- [[00 HashMap]]
- [[00 HashSet]]

------
**Links** (Внешние ссылки)
- [DigitalOcean](https://www.digitalocean.com/community/tutorials/java-equals-hashcode)
- [Baeldung](https://www.baeldung.com/java-equals-hashcode-contracts)