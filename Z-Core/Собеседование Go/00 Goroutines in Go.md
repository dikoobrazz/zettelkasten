2025030314:15
___
Date: 03-03-2025 | 14:15
Tags: #
mapofcontents: [[zero-links|OO Links]]
___
## Что такое Goroutines? Как используются?

> **Горутины** (*goroutines*) — это одна из ключевых особенностей языка Go, обеспечивающая простой и эффективный способ реализации конкурентности. Они позволяют запускать задачи "параллельно" в рамках одной программы, но с минимальными накладными расходами по сравнению с потоками ОС.

---
### Что такое горутины?
#### Определение

- **Горутина** — это легковесный поток выполнения, управляемый runtime Go, а не операционной системой.
- Это единица конкурентности: функция или задача, которая может выполняться независимо от основного потока программы.
#### Как это работает?

- Горутины создаются с помощью ключевого слова `go` перед вызовом функции.
- Они работают в рамках модели **M:N**:  
    - ***M*** горутин распределяются на ***N*** потоков ОС (управляются Go scheduler).
    - Scheduler автоматически переключает горутины, используя доступные ядра (через `GOMAXPROCS`).
- Размер стека горутины начинается с 2 КБ (растет по мере необходимости), в отличие от потоков ОС (обычно 1-8 МБ).
#### Отличие от потоков

- **Легкость**: Одна программа может запустить десятки тысяч горутин без значительных затрат памяти.
- **Управление**: Go runtime сама решает, как и когда переключать горутины, а не ОС.

---
### Когда использовать горутины?

1. **Конкурентные задачи**:  
    - Обработка запросов в веб-сервере (каждый запрос — горутина).
2. **I/O операции**:  
	- Чтение файлов, запросы к базе, сетевые вызовы — горутины позволяют не блокировать основной поток.
3. **Параллельные вычисления**:  
	- Если `GOMAXPROCS > 1`, горутины распределяются по ядрам для ускорения.

---
### Преимущества

- **Легкость**: Создание горутины дешевле потоков (тысячи vs сотни).
- **Гибкость**: Scheduler Go управляет переключением, упрощая конкурентность.
- **Интеграция**: Каналы и sync делают синхронизацию удобной.
### Недостатки

- **Непредсказуемость**: Порядок выполнения не гарантирован без синхронизации.
- **Ресурсы**: При злоупотреблении (миллионы горутин) память может исчерпаться.
- **Debug**: Сложнее отлаживать из-за асинхронности.
  
---
### Итог

**Горутины** — это легковесные потоки в Go для конкурентного выполнения задач:

- Создаются через `go func()`.
- Управляются runtime Go, а не ОС.
- Используются для I/O, серверов, параллельных вычислений.
  
С каналами и `WaitGroup` они становятся мощным инструментом конкурентности.

-----
**Zero-Links**  (Внутренние ссылки) Линки - ключевые слова
-

------
**Links** (Внешние ссылки)
-
