2025022418:45
___
Date: 24-02-2025 | 18:45
Tags: #
mapofcontents: [[zero-links|OO Links]]
___
## Как работает слайс? В чем отличие Array от Slice?

### Как работает слайс (slice) в Go?

> Слайс — это **абстракция** поверх массива. Он представляет собой структуру, которая включает:

1. **Указатель на базовый массив**,
2. **Длину** (сколько элементов среза используется),
3. **Ёмкость** (сколько элементов можно хранить в срезе, не выделяя новый массив).

> Слайс **не содержит данные**, а лишь ссылается на массив, который хранит фактические значения. Слайс **может изменяться** по длине, в отличие от массива, размер которого фиксирован.

### Структура слайса

Когда вы создаёте слайс, Go выделяет память для самого **слайса** (структуры, содержащей длину, ёмкость и указатель), но **данные** лежат в другом месте — в массиве.
```go
// В Go слайс представлен так:
type slice struct {
    ptr *T    // Указатель на массив, в котором хранятся данные
    len int   // Длина среза
    cap int   // Ёмкость массива (количество элементов, на которые ссылается слайс)
}
```

---
### Пример работы слайса
```go
package main

import "fmt"

func main() {
    // Инициализация массива
    arr := [5]int{1, 2, 3, 4, 5}
    
    // Создание слайса, который ссылается на массив
    slice := arr[1:4] // слайс от второго до четвертого элемента
    
    fmt.Println(slice) // [2 3 4]
    fmt.Println(len(slice)) // 3 (длина слайса)
    fmt.Println(cap(slice)) // 4 (ёмкость слайса)
    
    slice = append(slice, 6) // добавление элемента в слайс
    fmt.Println(slice) // [2 3 4 6]
    fmt.Println(len(slice)) // 4
    fmt.Println(cap(slice)) // 4
}
```

- **slice = arr[1:4]** создаёт слайс, который ссылается на часть массива `arr` (с 2-го по 4-й элемент).
- Мы можем **добавлять элементы в слайс** (через `append()`), при этом **слайс может расширяться**, если ёмкости недостаточно, создавая новый массив и ссылаясь на него.

---
### Отличие массива от слайса

|Характеристика|**Массив**|**Слайс**|
|---|---|---|
|**Размер**|Фиксированный, задаётся при создании (`[N]int`)|Динамический, может изменяться по длине с использованием `append()`|
|**Передача в функцию**|Передаётся **по значению** (копируется весь массив)|Передаётся **по ссылке** (копируются только метаданные, а данные остаются в исходном массиве)|
|**Гибкость**|Неизменяемый по размеру|Можно изменять размер (через `append()`)|
|**Выделение памяти**|Память выделяется для всего массива|Память выделяется для слайса, но данные (массив) могут быть **разделены** с другими слайсами|
|**Итерация**|Итерация по фиксированным элементам|Итерация по переменной длине элементов|

--- 
### Когда использовать слайсы и массивы?

- **Массивы** лучше использовать, если вам нужно **фиксированное количество элементов**, и этот размер не будет меняться.
- **Слайсы** — более гибкие и часто используемые, так как позволяют динамически изменять размер и эффективно работать с данными в Go.

**Пример:**
Если вам нужно создать структуру, которая будет использовать динамическую память (с возможностью расширения), всегда лучше использовать слайс:
```go
arr := []int{1, 2, 3}  // слайс
arr = append(arr, 4)    // расширение слайса
fmt.Println(arr)        // [1 2 3 4]
```

---
### Вывод

- **Массив** — это **фиксированная коллекция** элементов.
- **Слайс** — это **динамический интерфейс**, который предоставляет **гибкость** в работе с массивами, **ссылаясь на их часть** и позволяя менять размер.

-----
**Zero-Links**  (Внутренние ссылки) Линки - ключевые слова
-

------
**Links** (Внешние ссылки)
-
